{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/actions.js","webpack:///./src/js/messages.js","webpack:///./src/js/popup.js","webpack:///./src/js/content/content.js"],"names":["MSG_DOWNLOAD_APP","MSG_LOCATION_SELECTED","MSG_SET_NEXT_NEARBY","MSG_APP_GET_ACCOUNT_INFO","MSG_STARTUP_DATA","MSG_API_LOG_IN","MSG_API_SUBMIT_RATING","MSG_API_SUBMIT_FEEDBACK","MSG_POPUP_SHOW_PAGE","MSG_POPUP_UPDATE_LAST_TIME_CHANGED","MSG_POPUP_UPDATE_LAST_LOCATION","MSG_POPUP_SEND_ACCOUNT_INFO","MSG_POPUP_SHOW_MESSAGE","MSG_GET_USER","MSG_GET_FLAG_ICON","MSG_IS_PROXY_SET","MSG_TOGGLE_CONNECTION","MSG_LOG_IN","runtimeMessagePromise","data","Promise","resolve","reject","chrome","runtime","sendMessage","response","lastError","console","error","Messages","constructor","_eventHandlers","onMessage","addListener","sender","sendResponse","_router","on","handlers","push","forEach","handlersBlock","i","length","action","toApi","startupData","username","passHash","logIn","submitRating","rating","submitFeedback","msg","toApp","getAccountInfo","email","pass","args","toPopup","updateLastTimeChanged","time","PopupUtils","isPopupOpened","updateLastLocation","location","trace","JSON","stringify","sendAccountInfo","valid","premium","showPage","page","showMessage","toBackground","downloadApp","url","locationSelected","countryISO","city","arguments","setNextNearby","toggleConnection","connected","getUser","getFlagIcon","iso","medium","isProxySet","password","PORT_NAME","createConnectionPort","connect","name","popupOpened","onConnect","externalPort","onDisconnect","EVT_ACTIVATE_PREMIUM","window","addEventListener","e","detail"],"mappings":"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","file":"tuxler/js/content.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 68);\n","export const MSG_DOWNLOAD_APP = \"DOWNLOAD_APP\";\nexport const MSG_LOCATION_SELECTED = \"LOCATION_SELECTED\";\nexport const MSG_SET_NEXT_NEARBY = \"SET_NEXT_NEARBY\";\n\nexport const MSG_APP_GET_ACCOUNT_INFO = \"getAccountInfo\";\n\nexport const MSG_STARTUP_DATA = \"STARTUP_DATA\";\nexport const MSG_API_LOG_IN = \"API_LOG_IN\";\n\nexport const MSG_API_SUBMIT_RATING = \"API_SUBMIT_RATING\";\nexport const MSG_API_SUBMIT_FEEDBACK = \"API_SUBMIT_FEEDBACK\";\n\nexport const MSG_POPUP_SHOW_PAGE = \"POPUP_SHOW_PAGE\";\nexport const MSG_POPUP_UPDATE_LAST_TIME_CHANGED = \"POPUP_UPDATE_LAST_TIME_CHANGED\";\nexport const MSG_POPUP_UPDATE_LAST_LOCATION = \"POPUP_UPDATE_LAST_LOCATION\";\nexport const MSG_POPUP_SEND_ACCOUNT_INFO = \"POPUP_SEND_ACCOUNT_INFO\";\nexport const MSG_POPUP_SHOW_MESSAGE = \"POPUP_SHOW_MESSAGE\";\n\nexport const MSG_GET_USER = \"GET_USER\";\nexport const MSG_GET_FLAG_ICON = \"GET_FLAG_ICON\";\nexport const MSG_IS_PROXY_SET = \"IS_PROXY_SET\";\nexport const MSG_TOGGLE_CONNECTION = \"TOGGLE_CONNECTION\";\nexport const MSG_LOG_IN = \"LOG_IN\";\n","import {\n  MSG_DOWNLOAD_APP,\n  MSG_LOCATION_SELECTED,\n  MSG_SET_NEXT_NEARBY,\n\n  MSG_APP_GET_ACCOUNT_INFO,\n\n  MSG_STARTUP_DATA,\n  MSG_API_LOG_IN,\n  MSG_API_SUBMIT_RATING,\n  MSG_API_SUBMIT_FEEDBACK,\n\n  MSG_POPUP_UPDATE_LAST_TIME_CHANGED,\n  MSG_POPUP_UPDATE_LAST_LOCATION,\n  MSG_POPUP_SHOW_PAGE,\n  MSG_POPUP_SEND_ACCOUNT_INFO,\n  MSG_POPUP_SHOW_MESSAGE,\n\n  MSG_GET_FLAG_ICON,\n  MSG_IS_PROXY_SET,\n  MSG_TOGGLE_CONNECTION,\n\n  MSG_GET_USER,\n  MSG_LOG_IN,\n  MSG_LOG_OUT,\n} from './actions';\nimport {PopupUtils} from \"./popup\";\n\nconst runtimeMessagePromise = data => new Promise((resolve, reject) => {\n  chrome.runtime.sendMessage(data, response => {\n    if (chrome.runtime.lastError) {\n      console.error('chrome.runtime.lastError: ', chrome.runtime.lastError);\n      console.error('message data: ', data);\n      reject(chrome.runtime.lastError);\n    } else {\n      resolve(response);\n    }\n  });\n});\n\nconst Messages = new class {\n  constructor() {\n    this._eventHandlers = [];\n\n    chrome.runtime.onMessage.addListener((data, sender, sendResponse) => {\n      this._router(data, sender, sendResponse);\n    });\n  }\n\n  on(handlers) {\n    this._eventHandlers.push(handlers);\n  }\n\n  _router(data, sender, sendResponse) {\n    this._eventHandlers.forEach(handlersBlock => {\n      for (let i = 0; i < handlersBlock.length; i += 2) {\n        if (handlersBlock[i] === data.action) {\n          handlersBlock[i + 1](data, sender, sendResponse);\n        }\n      }\n    });\n  }\n\n  toApi() {\n    return {\n      startupData(username, passHash) {\n        return runtimeMessagePromise({action: MSG_STARTUP_DATA, username, passHash});\n      },\n      logIn(username, passHash) {\n        return runtimeMessagePromise({action: MSG_API_LOG_IN, username, passHash});\n      },\n      submitRating(rating) {\n        return runtimeMessagePromise({action: MSG_API_SUBMIT_RATING, rating});\n      },\n      submitFeedback(msg) {\n        return runtimeMessagePromise({action: MSG_API_SUBMIT_FEEDBACK, msg});\n      },\n    }\n  }\n  toApp() {\n    return {\n      getAccountInfo(email, pass) {\n        return runtimeMessagePromise({action: MSG_APP_GET_ACCOUNT_INFO, args: [email, pass]});\n      }\n    }\n  }\n\n  toPopup() {\n    return {\n      updateLastTimeChanged(time) {\n        if (PopupUtils.isPopupOpened()) {\n          return runtimeMessagePromise({action: MSG_POPUP_UPDATE_LAST_TIME_CHANGED, time});\n        }\n      },\n      updateLastLocation(location) {\n        console.trace('~updateLastLocation~', JSON.stringify(location));\n        if (PopupUtils.isPopupOpened()) {\n          return runtimeMessagePromise({action: MSG_POPUP_UPDATE_LAST_LOCATION, location});\n        }\n      },\n      sendAccountInfo(valid, premium) {\n        if (PopupUtils.isPopupOpened()) {\n          return runtimeMessagePromise({action: MSG_POPUP_SEND_ACCOUNT_INFO, valid});\n        }\n      },\n      showPage(page) {\n        if (PopupUtils.isPopupOpened()) {\n          return runtimeMessagePromise({action: MSG_POPUP_SHOW_PAGE, page});\n        }\n      },\n      showMessage(msg) {\n        if (PopupUtils.isPopupOpened()) {\n          return runtimeMessagePromise({action: MSG_POPUP_SHOW_MESSAGE, msg});\n        }\n      }\n    }\n  }\n\n  toBackground() {\n    return {\n      downloadApp(url) {\n        return runtimeMessagePromise({action: MSG_DOWNLOAD_APP, url});\n      },\n      locationSelected(countryISO, city) {\n        console.trace(\"locationSelected\", arguments)\n\n        return runtimeMessagePromise({action: MSG_LOCATION_SELECTED, countryISO, city});\n      },\n      setNextNearby(countryISO, city) {\n        return runtimeMessagePromise({action: MSG_SET_NEXT_NEARBY, countryISO, city});\n      },\n      toggleConnection(connected) {\n        return runtimeMessagePromise({action: MSG_TOGGLE_CONNECTION, connected});\n      },\n      getUser() {\n        return runtimeMessagePromise({action: MSG_GET_USER});\n      },\n      getFlagIcon(iso, medium=false) {\n        return runtimeMessagePromise({action: MSG_GET_FLAG_ICON, medium, iso});\n      },\n      isProxySet() {\n        return runtimeMessagePromise({action: MSG_IS_PROXY_SET});\n      },\n      logIn(email, password) {\n        return runtimeMessagePromise({action: MSG_LOG_IN, email, password});\n      }\n    }\n  }\n};\n\nexport default Messages;","export const PORT_NAME = 'popup';\n\nexport const createConnectionPort = () => {\n  chrome.runtime.connect({name: PORT_NAME});\n}\n\nexport const PopupUtils = new class {\n  constructor() {\n    this.popupOpened = false;\n\n    chrome.runtime.onConnect.addListener(externalPort => {\n      if (externalPort.name !== PORT_NAME) {\n        return;\n      }\n\n      externalPort.onDisconnect.addListener(() => {\n        this.popupOpened = false;\n      });\n\n      this.popupOpened = true;\n    })\n  }\n\n  isPopupOpened() {\n    return this.popupOpened;\n  }\n};","const EVT_ACTIVATE_PREMIUM = 'TUX_EVENT:ACTIVATE_PREMIUM';\n\nimport Messages from \"../messages\";\n\nwindow.addEventListener(EVT_ACTIVATE_PREMIUM, function (e) {\n  Messages.toBackground().logIn(e.detail.email, e.detail.password);\n}, false);"],"sourceRoot":""}